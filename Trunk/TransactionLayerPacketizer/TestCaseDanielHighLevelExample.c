#include "../../../UHSII_v150420_VTE10A/sources/sw/sim/src/StdAfx.h"

//u32 device_init[] = {0x000003BC, 0x0000033C, 0x000006B1, 0x00000600, 0x000006AA, 0x000006BB, 0x000006CC, 0x000005BC, 0x000005FD};
u32 device_init_0[] = {0x000003BC, 0x0000033C, 0x00000680, 0x00000600, 0x00000692, 0x00000602, 0x0000060F, 0x00000628, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 device_init_1[] = {0x000003BC, 0x0000033C, 0x00000680, 0x00000600, 0x00000692, 0x00000602, 0x0000060F, 0x00000628, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 enumeration_0[] = {0x000003BC, 0x0000033C, 0x00000680, 0x00000600, 0x00000692, 0x00000603, 0x000006F0, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 full_reset[] = {0x000003BC, 0x0000033C, 0x00000680, 0x00000600, 0x00000692, 0x00000600, 0x00005BC, 0x000005FD};

//u32 config_write[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x000006A0, 0x00000608, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000680, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 config_write[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x00000609, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 config_read[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000620, 0x00000608, 0x00005BC, 0x000005FD};
//u32 config_read0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000609, 0x00005BC, 0x000005FD};

u32 read_gcr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000600, 0x00005BC, 0x000005FD};
u32 read_gcr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000601, 0x00005BC, 0x000005FD};
u32 read_pcr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000602, 0x00005BC, 0x000005FD};
u32 read_pcr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000603, 0x00005BC, 0x000005FD};
u32 read_lcr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000604, 0x00005BC, 0x000005FD};
u32 read_lcr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000610, 0x00000605, 0x00005BC, 0x000005FD};
u32 read_st_reg[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000611, 0x00000680, 0x00005BC, 0x000005FD};
u32 read_int_reg[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000611, 0x00000601, 0x00005BC, 0x000005FD};

u32 write_gsr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x00000608, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 write_gsr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x00000609, 0x00000680, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 write_psr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x0000060A, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 write_psr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x0000060B, 0x00000600, 0x00000600, 0x00000600, 0x00000612, 0x000005BC, 0x000005FD};
u32 write_lsr0[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x0000060C, 0x00000620, 0x00000603, 0x00000602, 0x00000600, 0x000005BC, 0x000005FD};
u32 write_lsr1[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000690, 0x0000060D, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 write_int_reg[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000691, 0x0000600, 0x00000600, 0x00000600, 0x00000600, 0x00000601, 0x000005BC, 0x000005FD};

u32 dcmd_read[] = {0x000003BC, 0x0000033C, 0x00000691, 0x00000600, 0x000006A0, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000604, 0x000005BC, 0x000005FD};
u32 dcmd_read0[] = {0x000003BC, 0x0000033C, 0x00000691, 0x00000600, 0x00000660, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 dcmd_write[] = {0x000003BC, 0x0000033C, 0x00000691, 0x00000600, 0x000006C0, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 tran_abort[] = {0x000003BC, 0x0000033C, 0x00000681, 0x00000600, 0x00000682, 0x00000604, 0x00005BC, 0x000005FD};

//u32 data_write0[] = {0x000003BC, 0x0000031C, 0x000003BC, 0x0000031C, 0x000003BC, 0x0000033C, 0x000006A1, 0x000006A5, 0x00005BC, 0x000005FD, 0x000005BC, 0x000005FB, 0x000005BC, 0x000005FB};
//u32 data_write1[] = {0x000003BC, 0x0000031C, 0x000003BC, 0x0000031C, 0x000003BC, 0x0000033C, 0x000006A1, 0x000006F0, 0x00005BC, 0x000005FD, 0x000005BC, 0x000005FB, 0x000005BC, 0x000005FB};
//u32 data_write2[] = {0x000003BC, 0x0000031C, 0x000003BC, 0x0000031C, 0x000003BC, 0x0000033C, 0x000006A1, 0x000006FF, 0x00005BC, 0x000005FD, 0x000005BC, 0x000005FB, 0x000005BC, 0x000005FB};
//u32 data_write3[] = {0x000003BC, 0x0000031C, 0x000003BC, 0x0000031C, 0x000003BC, 0x0000033C, 0x000006A1, 0x00000600, 0x00005BC, 0x000005FD, 0x000005BC, 0x000005FB, 0x000005BC, 0x000005FB};

//u32 data_write0[] = {0x000003BC, 0x0000033C, 0x000006A1, 0x000006A5, 0x000006A5, 0x000006A5, 0x000006A5, 0x00005BC, 0x000005FD};
//u32 data_write1[] = {0x000003BC, 0x0000033C, 0x000006A1, 0x000006F0, 0x000006F0, 0x000006F0, 0x000006F0, 0x00005BC, 0x000005FD};
//u32 data_write2[] = {0x000003BC, 0x0000033C, 0x000006A1, 0x000006FF, 0x000006FF, 0x000006FF, 0x000006FF, 0x00005BC, 0x000005FD};
//u32 data_write3[] = {0x000003BC, 0x0000033C, 0x000006A1, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00005BC, 0x000005FD};

//u32 fcrdy[] = {0x000003BC, 0x0000033C, 0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000601, 0x00000600, 0x00005BC, 0x000005FD, 0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000601, 0x00000600, 0x00005BC, 0x000005FD};
u32 fcrdy[] = {0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000601, 0x00000600, 0x00005BC, 0x000005FD};
u32 fcreq[] = {0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000600, 0x00000600, 0x00005BC, 0x000005FD};
u32 fcstat[] = {0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000602, 0x00000600, 0x00005BC, 0x000005FD, 0x000003BC, 0x0000033C, 0x000006F1, 0x00000600, 0x00000602, 0x00000600, 0x00005BC, 0x000005FD};

u32 sd_cmd0[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd8[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000608, 0x00000600, 0x00000600, 0x00000601, 0x000006AA, 0x000005BC, 0x000005FD};
u32 sd_cmd55[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000637, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_acmd41_0[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000669, 0x00000640, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_acmd41_1[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000669, 0x00000640, 0x000006FF, 0x00000680, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd11[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x0000060B, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd2[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000602, 0x000006FF, 0x000006FF, 0x000006FF, 0x000006FF, 0x000005BC, 0x000005FD};
u32 sd_cmd3[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000603, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd9[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000609, 0x00000600, 0x00000601, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd7[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000607, 0x00000600, 0x00000601, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd13[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x0000060D, 0x00000600, 0x00000601, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd18[] = {0x000003BC, 0x0000033C, 0x00000611, 0x00000600, 0x00000640, 0x00000612, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_acmd42[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x0000066A, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_acmd6[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000646, 0x00000600, 0x00000600, 0x00000600, 0x00000602, 0x000005BC, 0x000005FD};
u32 sd_cmd16[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x00000610, 0x00000600, 0x00000600, 0x00000602, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd25[] = {0x000003BC, 0x0000033C, 0x00000611, 0x00000600, 0x00000640, 0x00000619, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
u32 sd_cmd12[] = {0x000003BC, 0x0000033C, 0x00000601, 0x00000600, 0x00000600, 0x0000060C, 0x00000600, 0x00000600, 0x00000600, 0x00000600, 0x000005BC, 0x000005FD};
//A5B4C3D2
u32 sd_data[] = {0x000003BC, 0x0000031C, 0x000003BC, 0x0000031C, 0x000003BC, 0x0000033C, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000006A5, 0x000006B4, 0x000006C3, 0x000006D2, 0x000005BC,  0x000005FD,  0x000005BC,  0x000005FB,  0x000005BC,  0x000005FB};

int ExtractPacketFromFullPacket( u32 *DataIn, unsigned char *DataOut, int MaxOutLen )
{
	int RetLen = 0;
	int Ind = 0;
	do{
		if( ( DataIn[Ind] & DATA_READ_FLAGS_IS_DATA ) == DATA_READ_FLAGS_IS_DATA && RetLen < MaxOutLen )
		{
			DataOut[ RetLen ] = ( DataIn[Ind] & ( ~DATA_READ_FLAGS_IS_DATA ) );
			RetLen++;
		}
		Ind++;
	}while( DataIn[Ind] != 0x000005FD );
	return RetLen;
}

void SendRawPacketDebug( u32 *FullPacket, int Sleep, char *dbgMsg )
{
	unsigned char PacketStore[50];
	int SendLen, RecvLen, i;

	//in the future we will be using packet in the short format
	SendLen = ExtractPacketFromFullPacket( FullPacket, PacketStore, 50 );

	//debug what we send
	xil_printf( "Data write ( %d ): ", SendLen );
	for( i = 0; i < SendLen; i++ )
		xil_printf(" 0x%X", PacketStore[i] );
	xil_printf( "\n");

	//send it
	SendPacket( PacketStore, SendLen );

	//need to wait a bit. No idea why
	SleepMS( 10 );

	//read reply
//	if( HasReply )
	do
	{
		RecvLen = RecvPacket( PacketStore, 50 );

		if( RecvLen > 0 )
		{
			xil_printf( "Data Read ( %d ): ", RecvLen );
			for( i = 0; i < RecvLen; i++ )
				xil_printf(" 0x%X", PacketStore[i] );
			xil_printf( "\n");
		}
	}while( RecvLen > 0 );

	xil_printf( "\n");
}

void TestCaseDanielHighLevel()
{
	SendRawPacketDebug( device_init_0, 1, "Send : Device Init 0\n" );
	SendRawPacketDebug( device_init_1, 1, "Send : Device Init 1\n" );

	SendRawPacketDebug( enumeration_0, 1, "Send : Device Enum 1\n" );

	{
		unsigned char PacketStore[50];
		int SendLen, RecvLen, i;
		TLPU_RES						*P_RES;
		TLPU_CCMD						*P_CCMD;
		unsigned int					*ReplyContent;

		P_CCMD = PacketStore;
		P_RES = PacketStore;
		//in the future we will be using packet in the short format
		SendLen = ExtractPacketFromFullPacket( read_gcr0, PacketStore, 50 );

		P_CCMD->Fields.Header.Fields.DestinationID = P_CCMD->Fields.Header.Fields.DestinationID;
		P_CCMD->Fields.Argument.Fields.IOADDR0 = P_CCMD->Fields.Argument.Fields.IOADDR0;

		SendPacket( PacketStore, SendLen );
		SleepMS( 10 );
		RecvLen = RecvPacket( PacketStore, 50 );

		P_RES->Fields.Header.Fields.DestinationID = P_CCMD->Fields.Header.Fields.DestinationID;
		P_RES->Fields.Argument.Fields.IOADDR0 = P_CCMD->Fields.Argument.Fields.IOADDR0;
		ReplyContent = &PacketStore[sizeof(P_RES->Fields)];
		*ReplyContent = *ReplyContent;

	}/**/

	SendRawPacketDebug( read_gcr0, 1, "Send : Read reg GCR 0\n" );
	SendRawPacketDebug( read_gcr1, 1, "Send : Read reg GCR 1\n" );

	SendRawPacketDebug( read_pcr0, 1, "Send : Read reg PCR 0\n" );
	SendRawPacketDebug( read_pcr1, 1, "Send : Read reg PCR 1\n" );

	SendRawPacketDebug( read_lcr0, 1, "Send : Read reg LCR 0\n" );
	SendRawPacketDebug( read_lcr0, 1, "Send : Read reg LCR 1\n" );


	SendRawPacketDebug( write_psr0, 1, "Send : Write reg PSR 0\n");
	SendRawPacketDebug( write_psr1, 1, "Send : Write reg PSR 1\n");

	SendRawPacketDebug( write_lsr0, 1, "Send : Write reg LSR 0\n");
	SendRawPacketDebug( write_lsr1, 1, "Send : Write reg LSR 1\n");

	SendRawPacketDebug( write_gsr0, 1, "Send : Write reg GSR 0\n");
	SendRawPacketDebug( write_gsr1, 1, "Send : Write reg GSR 1\n");

	SendRawPacketDebug( config_read, 1, "Send : Read reg config 1\n");

	SendRawPacketDebug( sd_cmd0, 1, "Send : sd_cmd0\n");
	SendRawPacketDebug( sd_cmd8, 1, "Send : sd_cmd8\n");
	SendRawPacketDebug( sd_cmd55, 1, "Send : sd_cmd55\n");
	SendRawPacketDebug( sd_acmd41_0, 1, "Send : sd_acmd41_0\n");
	SendRawPacketDebug( sd_cmd55, 1, "Send : sd_cmd55\n");
	SendRawPacketDebug( sd_acmd41_1, 1, "Send : sd_acmd41_1\n");


	SendRawPacketDebug( sd_cmd2, 1, "Send : sd_cmd2\n");
	SendRawPacketDebug( sd_cmd3, 1, "Send : sd_cmd3\n");
	SendRawPacketDebug( sd_cmd9, 1, "Send : sd_cmd9\n");
	SendRawPacketDebug( sd_cmd7, 1, "Send : sd_cmd7\n");
	SendRawPacketDebug( sd_cmd13, 1, "Send : sd_cmd13\n");

	SendRawPacketDebug( sd_cmd18, 1, "Send : sd_cmd18\n");
	SendRawPacketDebug( fcrdy, 1, "Send : fcrdy\n");
	/**/
}
